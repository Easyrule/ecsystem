<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <link href="homepage.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

  <style>
    canvas{
      position: absolute;
      top: 0;
      left: 0;
    }
    
    
    </style>

  <title>Face Recognition</title>
  
 
</head>

<body style="background-color: lightsteelblue"> 

  <nav>
    <input type="checkbox" id="check">
    <label for="check" class="checkbtn">
      <i class="fas fa-bars"></i>
    </label>
    <!-- <label><img src="logo.png"></label> -->
    <label class="logoh"><img src="assets\img\logo ecs.png">ECS</label>
    <ul>


      <li><a style="color:black;text-decoration: none;" href="homeEmployer.html" id="userlink">Home</a></li>
     
      
      <li><a style="text-decoration: none;" href="chomepage.html">Exit</a></li>
    </ul>
  </nav>


  <br>

    <div class="container">
      <div class="row">
        <div class="col">
          <div class="p-3 border bg-light">
          <h4> Please upload your student card picture</h4>    
          <img class="photo" style="object-fit: cover ; width : 320px; height: 480px" id="output" src="https://www.kindpng.com/picc/m/22-223941_transparent-avatar-png-male-avatar-icon-transparent-png.png" alt="">
           <input type="file" accept="image/*" id="imgu" onchange="loadFile(event)">

</div>


        </div>
        <div class="col">
          
          <div class="p-3 border bg-light">
            <h4> Current face image</h4>

          <video>  </video>
          
</div>
        </div>
        <button class="btn btn-primary"  disabled id="apo" type="button">Take a snapshot</button>
           
      </div>
    </div>
       

        
     

<br>


        





    <div class="container px-4">
      <div class="row gx-5">
        <div class="col">
         <div id="capimg" class="p-3 border bg-light">

          <h4> Captured Image</h4>
          <img id="pahit"/>
          
  
         </div>
        </div>
        <div class="col">

         
           

            
          </div>

        </div>
      </div>
    </div>

 


  
  
   


<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-database.js"></script> 
<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-storage.js"></script> 

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  <script defer src="face-api.min.js"></script>
  <script defer src="verify.js"></script>


  

<script type="module">

  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.4/firebase-app.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries
  // Your web app's Firebase configuration
  const firebaseConfig = {
      apiKey: "AIzaSyB4hN8Ymb96TdyBvqIsIZXNIqArfakXZLY",
      authDomain: "easyjob-a98f3.firebaseapp.com",
      databaseURL: "https://easyjob-a98f3-default-rtdb.firebaseio.com",
      projectId: "easyjob-a98f3",
      storageBucket: "easyjob-a98f3.appspot.com",
      messagingSenderId: "21673523971",
      appId: "1:21673523971:web:9702e1ac4907c305f70736"
  };

  // Initialize Firebase

  const app = initializeApp(firebaseConfig);
  import {
      getDatabase, ref, get, set, child, update, remove, onValue, query, limitToFirst,
      limitToLast, orderByChild, startAt, startAfter, endAt, endBefore, equalTo
  }
      from "https://www.gstatic.com/firebasejs/9.6.4/firebase-database.js";
  const db = getDatabase();


  var Screen = document.getElementById("screen");
  let userlink = document.getElementById('userlink');
  let signoutlink = document.getElementById('signoutlink');
  var currentUser = null;
  var updBtn = document.getElementById("upd");

 

  function getUsername() {
      let keepLoggedIn = localStorage.getItem("keepLoggedIn");

      if (keepLoggedIn == "yes") {
          currentUser = JSON.parse(localStorage.getItem('user'));
      }

      else {
          currentUser = JSON.parse(sessionStorage.getItem('user'));
      }
  }

  function Signout() {
      sessionStorage.removeItem('user');
      localStorage.removeItem('user');
      localStorage.removeItem('keepLoggedIn');
      window.location = "homeEmployee.html";
  }

  window.onload = function () {
      getUsername();
      if (currentUser == null) {
          userlink.innerText = "";
          userlink.href = "register.html";
          signoutlink.innerText = "Login";
          signoutlink.href = "login.html";
      }

      else {
          userlink.innerText = currentUser.MatricNumber;
          userlink.href = "#";

          signoutlink.innerText = "Sign Out";
          signoutlink.addEventListener('click', Signout);
      }
  }

 
</script>







</body>
</html>